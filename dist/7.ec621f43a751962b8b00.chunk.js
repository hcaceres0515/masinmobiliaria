webpackJsonp([7],{1462:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(14),i=n(354),a=n(355),s=n(1634),l=n(715),p=(n.n(l),n(13)),d=n(1476),u=(n.n(d),n(1539)),c=n(1538),m=n(356),h=n(716),f=n(1463);n.d(e,"UsersModule",(function(){return g}));var g=(function(){function t(){}return t=__decorate([n.i(o.NgModule)({imports:[r.CommonModule,i.a,p.FormsModule,l.Ng2SmartTableModule,d.NguiAutoCompleteModule,a.a.forRoot(),a.b.forRoot(),a.c.forRoot(),s.a,h.a],entryComponents:[c.a],declarations:[u.a,c.b,c.a],providers:[m.a,f.a]}),__metadata("design:paramtypes",[])],t)})()},1463:function(t,e,n){"use strict";var o=n(0),r=n(42),i=n(121),a=n(161);n.n(a);n.d(e,"a",(function(){return s}));var s=(function(){function t(t){this._http=t,this.PATH_SERVER=i.a._SERVER,this.componentMethodCallSource=new a.Subject,this.componentMethodCallSourcePropertyVisit=new a.Subject,this.componentMethodCallSourceProperty=new a.Subject,this.methodCallSourcePropertyVisitEdit=new a.Subject,this.componentMethodCalled$=this.componentMethodCallSource.asObservable(),this.componentMethodCallPropertyVisit$=this.componentMethodCallSourcePropertyVisit.asObservable(),this.componentMethodCallProperty$=this.componentMethodCallSourceProperty.asObservable(),this.methodCallPropertyVisitEdit$=this.methodCallSourcePropertyVisitEdit.asObservable()}return t.prototype.callShowViewModalService=function(t){this.componentMethodCallSource.next(t)},t.prototype.callShowDeleteModalPropertyVisit=function(t){this.componentMethodCallSource.next(t)},t.prototype.callShowEditPropertyVisit=function(t){this.methodCallSourcePropertyVisitEdit.next(t)},t.prototype.callReloadListPropertyVisit=function(){this.componentMethodCallSourcePropertyVisit.next()},t.prototype.callReloadListProperty=function(){this.componentMethodCallSourceProperty.next()},t.prototype.getPropertiesByUser=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_properties_by_user&user_id="+t).map((function(t){return t.json()}))},t.prototype.getProperties=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_properties").map((function(t){return t.json()}))},t.prototype.getPropertiesByOffice=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_properties_by_office&office_id="+t).map((function(t){return t.json()}))},t.prototype.getPropertyInfoById=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_by_id&property_id="+t).map((function(t){return t.json()}))},t.prototype.getPropertiesByLocation=function(t,e){return this._http.get(this.PATH_SERVER+"&c=property&m=get_properties_by_location&lat="+t+"&lng="+e).map((function(t){return t.json()}))},t.prototype.getDepartments=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_departments").map((function(t){return t.json()}))},t.prototype.getProvinceByDepartment=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_provinces_by_department&department_id="+t).map((function(t){return t.json()}))},t.prototype.getDistrictByProvince=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_districts_by_province&province_id="+t).map((function(t){return t.json()}))},t.prototype.getPropertyContract=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_contract").map((function(t){return t.json()}))},t.prototype.getPropertyStatus=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_status").map((function(t){return t.json()}))},t.prototype.getPropertyType=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_type").map((function(t){return t.json()}))},t.prototype.getPropertyCoin=function(){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_coin").map((function(t){return t.json()}))},t.prototype.getPropertyVisits=function(t,e,n,o){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_visits&userId="+t+"&propertyId="+e+"&dateFrom="+n+"&dateTo="+o).map((function(t){return t.json()}))},t.prototype.addProperty=function(t){var e=new r.Headers({"Content-Type":"text/plain"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify(t);return this._http.post(this.PATH_SERVER+"&c=property&m=add_property",o,n).map((function(t){return t.json()}))},t.prototype.editProperty=function(t){var e=new r.Headers({"Content-Type":"application/json"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify(t);return this._http.post(this.PATH_SERVER+"&c=property&m=edit_property",o,n).map((function(t){return t.json()}))},t.prototype.deleteProperty=function(t){var e=new r.Headers({"Content-Type":"application/json"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify({property_id:t});return this._http.post(this.PATH_SERVER+"&c=property&m=delete_property",o,n).map((function(t){return t.json()}))},t.prototype.deletePropertyImage=function(t){var e=new r.Headers({"Content-Type":"text/plain"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify({image_id:t});return this._http.post(this.PATH_SERVER+"&c=property&m=delete_property_image",o,n).map((function(t){return t.json()}))},t.prototype.sendPropertyByEmail=function(t,e,n,o){return this._http.get(this.PATH_SERVER+"&c=property&m=send_property_pdf_by_email&property_id="+t+"&customer_id="+e+"&user_id="+n+"&message="+o).map((function(t){return t.json()}))},t.prototype.addPropertyVisit=function(t){var e=new r.Headers({"Content-Type":"text/plain"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify(t);return this._http.post(this.PATH_SERVER+"&c=property&m=add_property_visit",o,n).map((function(t){return t.json()}))},t.prototype.getPropertyVisit=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=get_property_visit&visit_id="+t).map((function(t){return t.json()}))},t.prototype.editPropertyVisit=function(t){var e=new r.Headers({"Content-Type":"text/plain"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify(t);return console.log(o),this._http.post(this.PATH_SERVER+"&c=property&m=edit_property_visit",o,n).map((function(t){return t.json()}))},t.prototype.deletePropertyVisit=function(t){var e=new r.Headers({"Content-Type":"text/plain"}),n=new r.RequestOptions({headers:e,method:"post"}),o=JSON.stringify({property_visit_id:t});return console.log(o),this._http.post(this.PATH_SERVER+"&c=property&m=delete_property_visit",o,n).map((function(t){return t.json()}))},t.prototype.downloadPropertyImages=function(t){return this._http.get(this.PATH_SERVER+"&c=property&m=download_property_images&property_id="+t).map((function(t){return t.json()}))},t.prototype.transferProperties=function(t,e){var n=new r.Headers({"Content-Type":"text/plain"}),o=new r.RequestOptions({headers:n,method:"post"}),i=JSON.stringify({user_from_id:t,user_to_id:e});return this._http.post(this.PATH_SERVER+"&c=property&m=transfer_properties",i,o).map((function(t){return t.json()}))},t=__decorate([n.i(o.Injectable)(),__metadata("design:paramtypes",[r.Http])],t)})()},1464:function(t,e,n){"use strict";var o=n(0),r=n(1465),i=(function(){function t(t,e){var n=this;this.autoComplete=e,this.minChars=0,this.loadingText="Loading",this.loadingTemplate=null,this.showInputTag=!0,this.showDropdownOnInit=!1,this.tabToSelect=!0,this.matchFormatted=!1,this.valueSelected=new o.EventEmitter,this.dropdownVisible=!1,this.isLoading=!1,this.filteredList=[],this.minCharsEntered=!1,this.itemIndex=0,this.reloadListInDelay=function(t){var e=n.isSrcArr()?10:500,o=t.target.value;n.delay((function(){return n.reloadList(o)}),e)},this.inputElKeyHandler=function(t){var e=n.filteredList.length;switch(t.keyCode){case 27:break;case 38:n.itemIndex=(e+n.itemIndex-1)%e,n.scrollToView(n.itemIndex);break;case 40:n.dropdownVisible=!0,n.itemIndex=(e+n.itemIndex+1)%e,n.scrollToView(n.itemIndex);break;case 13:n.filteredList.length>0&&n.selectOne(n.filteredList[n.itemIndex]),t.preventDefault();break;case 9:n.tabToSelect&&n.filteredList.length>0&&n.selectOne(n.filteredList[n.itemIndex])}},this.delay=(function(){var t=0;return function(e,n){clearTimeout(t),t=setTimeout(e,n)}})(),this.el=t.nativeElement}return t.prototype.isSrcArr=function(){return"Array"===this.source.constructor.name},t.prototype.ngOnInit=function(){var t=this;this.autoComplete.source=this.source,this.autoComplete.pathToData=this.pathToData,this.autoComplete.listFormatter=this.listFormatter,setTimeout((function(){t.autoCompleteInput&&t.autoCompleteInput.nativeElement.focus(),t.showDropdownOnInit&&t.showDropdownList({target:{value:""}})}))},t.prototype.showDropdownList=function(t){this.dropdownVisible=!0,this.reloadList(t.target.value)},t.prototype.hideDropdownList=function(){this.dropdownVisible=!1},t.prototype.findItemFromSelectValue=function(t){var e=this.filteredList.filter((function(e){return""+e===t}));return e.length?e[0]:null},t.prototype.reloadList=function(t){var e=this;if(this.filteredList=[],t.length<(this.minChars||0))return void(this.minCharsEntered=!1);this.minCharsEntered=!0,this.isSrcArr()?(this.isLoading=!1,this.filteredList=this.autoComplete.filter(this.source,t,this.matchFormatted),this.maxNumList&&(this.filteredList=this.filteredList.slice(0,this.maxNumList))):(this.isLoading=!0,"function"==typeof this.source?this.source(t).subscribe((function(t){if(e.pathToData){e.pathToData.split(".").forEach((function(e){return t=t[e]}))}e.filteredList=t,e.maxNumList&&(e.filteredList=e.filteredList.slice(0,e.maxNumList))}),(function(t){return null}),(function(){return e.isLoading=!1})):this.autoComplete.getRemoteData(t).subscribe((function(t){e.filteredList=t?t:[],e.maxNumList&&(e.filteredList=e.filteredList.slice(0,e.maxNumList))}),(function(t){return null}),(function(){return e.isLoading=!1})))},t.prototype.selectOne=function(t){this.valueSelected.emit(t)},t.prototype.scrollToView=function(t){var e=this.autoCompleteContainer.nativeElement,n=e.querySelector("ul"),o=n.querySelector("li"),r=o.offsetHeight,i=n.scrollTop,a=i+n.offsetHeight,s=r*t;(s<i||s+r>a)&&(n.scrollTop=s)},Object.defineProperty(t.prototype,"emptyList",{get:function(){return!(this.isLoading||this.minCharsEntered&&!this.isLoading&&!this.filteredList.length||this.filteredList.length)},enumerable:!0,configurable:!0}),t.decorators=[{type:o.Component,args:[{selector:"ngui-auto-complete",template:'\n  <div #autoCompleteContainer class="ngui-auto-complete">\n    <!-- keyword input -->\n    <input *ngIf="showInputTag"\n           #autoCompleteInput class="keyword"\n           placeholder="{{placeholder}}"\n           (focus)="showDropdownList($event)"\n           (blur)="hideDropdownList()"\n           (keydown)="inputElKeyHandler($event)"\n           (input)="reloadListInDelay($event)"\n           [(ngModel)]="keyword" />\n\n    <!-- dropdown that user can select -->\n    <ul *ngIf="dropdownVisible" [class.empty]="emptyList">\n      <li *ngIf="isLoading && loadingTemplate" class="loading" [innerHTML]="loadingTemplate"></li>\n      <li *ngIf="isLoading && !loadingTemplate" class="loading">{{loadingText}}</li>\n      <li *ngIf="minCharsEntered && !isLoading && !filteredList.length"\n           (mousedown)="selectOne(\'\')"\n           class="no-match-found">{{noMatchFoundText || \'No Result Found\'}}</li>\n      <li *ngIf="blankOptionText && filteredList.length"\n          (mousedown)="selectOne(\'\')"\n          class="blank-item">{{blankOptionText}}</li>\n      <li class="item"\n          *ngFor="let item of filteredList; let i=index"\n          (mousedown)="selectOne(item)"\n          [ngClass]="{selected: i === itemIndex}"\n          [innerHtml]="autoComplete.getFormattedListItem(item)">\n      </li>\n    </ul>\n\n  </div>',providers:[r.NguiAutoComplete],styles:["\n  @keyframes slideDown {\n    0% {\n      transform:  translateY(-10px);\n    }\n    100% {\n      transform: translateY(0px);\n    }\n  }\n  .ngui-auto-complete {\n    background-color: transparent;\n  }\n  .ngui-auto-complete > input {\n    outline: none;\n    border: 0;\n    padding: 2px; \n    box-sizing: border-box;\n    background-clip: content-box;\n  }\n\n  .ngui-auto-complete > ul {\n    background-color: #fff;\n    margin: 0;\n    width : 100%;\n    overflow-y: auto;\n    list-style-type: none;\n    padding: 0;\n    border: 1px solid #ccc;\n    box-sizing: border-box;\n    animation: slideDown 0.1s;\n  }\n  .ngui-auto-complete > ul.empty {\n    display: none;\n  }\n\n  .ngui-auto-complete > ul li {\n    padding: 2px 5px;\n    border-bottom: 1px solid #eee;\n  }\n\n  .ngui-auto-complete > ul li.selected {\n    background-color: #ccc;\n  }\n\n  .ngui-auto-complete > ul li:last-child {\n    border-bottom: none;\n  }\n\n  .ngui-auto-complete > ul li:hover {\n    background-color: #ccc;\n  }"],encapsulation:o.ViewEncapsulation.None}]}],t.ctorParameters=[{type:o.ElementRef},{type:r.NguiAutoComplete}],t.propDecorators={listFormatter:[{type:o.Input,args:["list-formatter"]}],source:[{type:o.Input,args:["source"]}],pathToData:[{type:o.Input,args:["path-to-data"]}],minChars:[{type:o.Input,args:["min-chars"]}],placeholder:[{type:o.Input,args:["placeholder"]}],blankOptionText:[{type:o.Input,args:["blank-option-text"]}],noMatchFoundText:[{type:o.Input,args:["no-match-found-text"]}],acceptUserInput:[{type:o.Input,args:["accept-user-input"]}],loadingText:[{type:o.Input,args:["loading-text"]}],loadingTemplate:[{type:o.Input,args:["loading-template"]}],maxNumList:[{type:o.Input,args:["max-num-list"]}],showInputTag:[{type:o.Input,args:["show-input-tag"]}],showDropdownOnInit:[{type:o.Input,args:["show-dropdown-on-init"]}],tabToSelect:[{type:o.Input,args:["tab-to-select"]}],matchFormatted:[{type:o.Input,args:["match-formatted"]}],valueSelected:[{type:o.Output}],autoCompleteInput:[{type:o.ViewChild,args:["autoCompleteInput"]}],autoCompleteContainer:[{type:o.ViewChild,args:["autoCompleteContainer"]}]},t})();e.NguiAutoCompleteComponent=i},1465:function(t,e,n){"use strict";var o=n(0),r=n(42);n(102);var i=(function(){function t(t){this.http=t}return t.prototype.filter=function(t,e,n){var o=this;return t.filter((function(t){var r=n?o.getFormattedListItem(t).toLowerCase():JSON.stringify(t).toLowerCase();return e=e.toLowerCase(),r.indexOf(e)!==-1}))},t.prototype.getFormattedListItem=function(t){var e,n=this.listFormatter||"(id) value";if("function"==typeof n)e=n.apply(this,[t]);else if("object"!=typeof t)e=t;else if("string"==typeof n){e=n;var o=n.match(/[a-zA-Z0-9_\$]+/g);o&&"string"!=typeof t&&o.forEach((function(n){e=e.replace(n,t[n])}))}return e},t.prototype.getRemoteData=function(t){var e=this;if("string"!=typeof this.source)throw"Invalid type of source, must be a string. e.g. http://www.google.com?q=:my_keyword";if(!this.http)throw"Http is required.";var n=this.source.match(/:[a-zA-Z_]+/);if(null===n)throw"Replacement word is missing.";var o=n[0],r=this.source.replace(o,t);return this.http.get(r).map((function(t){return t.json()})).map((function(t){var n=t.data||t;if(e.pathToData){e.pathToData.split(".").forEach((function(t){return n=n[t]}))}return n}))},t.decorators=[{type:o.Injectable}],t.ctorParameters=[{type:r.Http,decorators:[{type:o.Optional}]}],t})();e.NguiAutoComplete=i},1470:function(t,e,n){"use strict";var o=n(0),r=n(1464),i=n(13),a=(function(){function t(t,e,n,i){var a=this;this.resolver=t,this.renderer=e,this.viewContainerRef=n,this.parentForm=i,this.loadingTemplate=null,this.loadingText="Loading",this.tabToSelect=!0,this.matchFormatted=!1,this.zIndex="1",this.ngModelChange=new o.EventEmitter,this.valueChanged=new o.EventEmitter,this.showAutoCompleteDropdown=function(t){a.hideAutoCompleteDropdown(),a.scheduledBlurHandler=null;var e=a.resolver.resolveComponentFactory(r.NguiAutoCompleteComponent);a.componentRef=a.viewContainerRef.createComponent(e);var n=a.componentRef.instance;n.showInputTag=!1,n.pathToData=a.pathToData,n.minChars=a.minChars,n.source=a.source,n.placeholder=a.autoCompletePlaceholder,n.acceptUserInput=a.acceptUserInput,n.maxNumList=parseInt(a.maxNumList,10),n.loadingText=a.loadingText,n.loadingTemplate=a.loadingTemplate,n.listFormatter=a.listFormatter,n.blankOptionText=a.blankOptionText,n.noMatchFoundText=a.noMatchFoundText,n.tabToSelect=a.tabToSelect,n.matchFormatted=a.matchFormatted,n.valueSelected.subscribe(a.selectNewValue),a.acDropdownEl=a.componentRef.location.nativeElement,a.acDropdownEl.style.display="none","INPUT"!==a.el.tagName&&a.acDropdownEl&&a.inputEl.parentElement.insertBefore(a.acDropdownEl,a.inputEl.nextSibling),a.revertValue=void 0!==a.ngModel?a.ngModel:a.inputEl.value,setTimeout((function(){n.reloadList(a.inputEl.value),a.styleAutoCompleteDropdown(),n.dropdownVisible=!0}))},this.hideAutoCompleteDropdown=function(t){if(a.componentRef){var e=void 0,n=void 0!==a.revertValue;a.inputEl&&n&&a.acceptUserInput===!1&&(e=a.componentRef.instance.findItemFromSelectValue(a.inputEl.value)),a.componentRef.destroy(),a.componentRef=void 0,a.inputEl&&n&&a.acceptUserInput===!1&&null===e&&a.selectNewValue(a.revertValue)}},this.styleAutoCompleteDropdown=function(){if(a.componentRef){var t=(a.componentRef.instance,a.el.getBoundingClientRect(),a.inputEl.getBoundingClientRect()),e=t.bottom+100>window.innerHeight;a.acDropdownEl.style.width=t.width+"px",a.acDropdownEl.style.position="absolute",a.acDropdownEl.style.zIndex=a.zIndex,a.acDropdownEl.style.left="0",a.acDropdownEl.style.display="inline-block",e?a.acDropdownEl.style.bottom=t.height+"px":a.acDropdownEl.style.top=t.height+"px"}},this.selectNewValue=function(t){t&&"object"==typeof t&&(t=a.setToStringFunction(t)),a.inputEl&&(a.inputEl.value=""+t);var e=t;a.selectValueOf&&t[a.selectValueOf]&&(e=t[a.selectValueOf]),(a.parentForm&&a.formControlName||a.extFormControl)&&e&&a.formControl.patchValue(e),e!==a.ngModel&&a.ngModelChange.emit(e),a.valueChanged.emit(e),a.hideAutoCompleteDropdown()},this.keydownEventHandler=function(t){if(a.componentRef){a.componentRef.instance.inputElKeyHandler(t)}},this.inputEventHandler=function(t){if(a.componentRef){var e=a.componentRef.instance;e.dropdownVisible=!0,e.reloadListInDelay(t)}else a.showAutoCompleteDropdown()},this.el=this.viewContainerRef.element.nativeElement}return t.prototype.ngOnInit=function(){var t=this;document.addEventListener("click",(function(e){t.scheduledBlurHandler&&(t.scheduledBlurHandler(),t.scheduledBlurHandler=null)})),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="ngui-auto-complete-wrapper",this.wrapperEl.style.position="relative",this.el.parentElement.insertBefore(this.wrapperEl,this.el.nextSibling),this.wrapperEl.appendChild(this.el),this.parentForm&&this.formControlName?this.parentForm.form?this.formControl=this.parentForm.form.get(this.formControlName):this.parentForm instanceof i.FormGroupName&&(this.formControl=this.parentForm.control.controls[this.formControlName]):this.extFormControl&&(this.formControl=this.extFormControl),this.ngModel?this.selectNewValue(this.ngModel):this.formControl&&this.formControl.value&&this.selectNewValue(this.formControl.value[this.displayPropertyName])},t.prototype.ngAfterViewInit=function(){var t=this;this.inputEl="INPUT"===this.el.tagName?this.el:this.el.querySelector("input"),this.inputEl.addEventListener("focus",(function(e){return t.showAutoCompleteDropdown(e)})),this.inputEl.addEventListener("blur",(function(e){t.scheduledBlurHandler=t.hideAutoCompleteDropdown})),this.inputEl.addEventListener("keydown",(function(e){return t.keydownEventHandler(e)})),this.inputEl.addEventListener("input",(function(e){return t.inputEventHandler(e)}))},t.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.instance.valueSelected.unsubscribe()},t.prototype.ngOnChanges=function(t){t.ngModel&&(this.ngModel=this.setToStringFunction(t.ngModel.currentValue))},t.prototype.setToStringFunction=function(t){if(t&&"object"==typeof t){var e;if("string"==typeof this.valueFormatter){var n=this.valueFormatter.match(/[a-zA-Z0-9_\$]+/g),o=this.valueFormatter;n&&"string"!=typeof t&&n.forEach((function(e){o=o.replace(e,t[e])})),e=o}else e="function"==typeof this.valueFormatter?this.valueFormatter(t):this.displayPropertyName?t[this.displayPropertyName]:"string"==typeof this.listFormatter&&this.listFormatter.match(/^\w+$/)?t[this.listFormatter]:t.value;t.toString=function(){return e}}return t},t.decorators=[{type:o.Directive,args:[{selector:"[auto-complete], [ngui-auto-complete]"}]}],t.ctorParameters=[{type:o.ComponentFactoryResolver},{type:o.Renderer},{type:o.ViewContainerRef},{type:i.ControlContainer,decorators:[{type:o.Optional},{type:o.Host},{type:o.SkipSelf}]}],t.propDecorators={autoCompletePlaceholder:[{type:o.Input,args:["auto-complete-placeholder"]}],source:[{type:o.Input,args:["source"]}],pathToData:[{type:o.Input,args:["path-to-data"]}],minChars:[{type:o.Input,args:["min-chars"]}],displayPropertyName:[{type:o.Input,args:["display-property-name"]}],acceptUserInput:[{type:o.Input,args:["accept-user-input"]}],maxNumList:[{type:o.Input,args:["max-num-list"]}],selectValueOf:[{type:o.Input,args:["select-value-of"]}],loadingTemplate:[{type:o.Input,args:["loading-template"]}],listFormatter:[{type:o.Input,args:["list-formatter"]}],loadingText:[{type:o.Input,args:["loading-text"]}],blankOptionText:[{type:o.Input,args:["blank-option-text"]}],noMatchFoundText:[{type:o.Input,args:["no-match-found-text"]}],valueFormatter:[{type:o.Input,args:["value-formatter"]}],tabToSelect:[{type:o.Input,args:["tab-to-select"]}],matchFormatted:[{type:o.Input,args:["match-formatted"]}],ngModel:[{type:o.Input}],formControlName:[{type:o.Input,args:["formControlName"]}],extFormControl:[{type:o.Input,args:["formControl"]}],zIndex:[{type:o.Input,args:["z-index"]}],ngModelChange:[{type:o.Output}],valueChanged:[{type:o.Output}]},t})();e.NguiAutoCompleteDirective=a},1475:function(t,e,n){"use strict";var o=n(0),r=n(14),i=n(13),a=n(1464),s=n(1470),l=n(1465),p=(function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[l.NguiAutoComplete]}},t.decorators=[{type:o.NgModule,args:[{imports:[r.CommonModule,i.FormsModule],declarations:[a.NguiAutoCompleteComponent,s.NguiAutoCompleteDirective],exports:[a.NguiAutoCompleteComponent,s.NguiAutoCompleteDirective],entryComponents:[a.NguiAutoCompleteComponent]}]}],t.ctorParameters=[],t})();e.NguiAutoCompleteModule=p},1476:function(t,e,n){"use strict";var o=n(1465);e.NguiAutoComplete=o.NguiAutoComplete;var r=n(1475);e.NguiAutoCompleteModule=r.NguiAutoCompleteModule;var i=n(1464);e.NguiAutoCompleteComponent=i.NguiAutoCompleteComponent;var a=n(1470);e.NguiAutoCompleteDirective=a.NguiAutoCompleteDirective},1538:function(t,e,n){"use strict";var o=n(0),r=n(355),i=n(715),a=(n.n(i),n(38)),s=n(356),l=n(1633),p=n(121),d=n(1463);n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var u=(function(){function t(t,e,n){this._userService=t,this._propertyService=e,this._router=n,this.PATH_SERVER=p.a._SERVER,this.showtransferMessage=!1,this.loadingIcon=!1}return t.prototype.ngOnInit=function(){this.userData=this.value,this.options={url:this.PATH_SERVER+"&c=user&m=upload_image",params:{user_id:this.userData.id}}},t.prototype.showUserEditModal=function(){this.userEditModal.show()},t.prototype.hideUserEditModal=function(){this.userEditModal.hide()},t.prototype.showUserViewModal=function(){this.userViewModal.show()},t.prototype.hideUserViewModal=function(){this.userViewModal.hide()},t.prototype.showUserDeleteModal=function(){this.userDeleteModal.show(),this.getAllUsers()},t.prototype.hideUserDeleteModal=function(){this.userDeleteModal.hide()},t.prototype.onEditUser=function(t){var e=this;this.loadingIcon=!0,this._userService.editUser(t).subscribe((function(t){return alert(t)}),(function(){e.loadingIcon=!1,e.hideUserEditModal(),e._userService.callUpdateTableService()}))},t.prototype.onDeleteUser=function(t){var e=this;this._userService.deleteUser(t).subscribe((function(t){return alert(t)}),(function(){e.hideUserDeleteModal(),e._userService.callUpdateTableService()}))},t.prototype.onSendPasswordToUser=function(t){var e=this;this.loadingIcon=!0,this._userService.sendPasswordToUSer(t).subscribe((function(t){return alert(t)}),(function(){e.loadingIcon=!1,console.log(e.userData)}))},t.prototype.onFileChange=function(t){var e=t.target.files;if(e.length>0){var n=e[0],o=new FormData;o.append("uploadFile",n,n.name),console.log(n.name);var r;this._userService.uploadImage(o).subscribe((function(t){return r=t}),(function(t){return t}),(function(){}))}},t.prototype.handleUpload=function(t){this.loadingIcon=!0,t&&t.response&&(t=JSON.parse(t.response),this.loadingIcon=!1,this.userData.path_user_photo=t.path_user_photo)},t.prototype.getAllUsers=function(){var t=this;this._userService.getAllUsers().subscribe((function(e){return t.users=e}),(function(t){return alert(t)}),(function(){var e=t.users.filter((function(e){return e.id!==t.userData.id}));t.users=e,t.selectedUser=t.users[0]}))},t.prototype.transferProperties=function(t){var e=this,n=this.selectedUser.id;console.log(this.selectedUser),console.log(t),this._propertyService.transferProperties(t,n).subscribe((function(t){}),(function(){e.showtransferMessage=!0,setTimeout(function(){this.showtransferMessage=!1}.bind(e),3e3)}))},__decorate([n.i(o.ViewChild)("userEditModal"),__metadata("design:type",r.d)],t.prototype,"userEditModal",void 0),__decorate([n.i(o.ViewChild)("userViewModal"),__metadata("design:type",r.d)],t.prototype,"userViewModal",void 0),__decorate([n.i(o.ViewChild)("userDeleteModal"),__metadata("design:type",r.d)],t.prototype,"userDeleteModal",void 0),__decorate([n.i(o.Input)(),__metadata("design:type",Object)],t.prototype,"value",void 0),__decorate([n.i(o.Input)(),__metadata("design:type",Object)],t.prototype,"rowData",void 0),t=__decorate([n.i(o.Component)({selector:"actions-user-table",template:n(1747)}),__metadata("design:paramtypes",[s.a,d.a,a.b])],t)})(),c=(function(){function t(t,e){var n=this;this._userService=t,this._router=e,this.query="",this.settings={noDataMessage:"No se encontraron registros.",actions:{add:!1,edit:!1,delete:!1},columns:{id:{title:"ID",type:"number",filter:!1},name:{title:"Nombre",type:"string",filter:!1},email:{title:"E-mail",type:"string",filter:!1},phone:{title:"Telefono",type:"string",filter:!1},createdAt:{title:"Creado",type:"date",filter:!1},item:{title:"Acciones",type:"custom",renderComponent:u,filter:!1}}},this.source=new i.LocalDataSource,this.loadingIcon=!1,this._userService.componentMethodCalled$.subscribe((function(){n.loadTable()}))}return t.prototype.ngOnInit=function(){this.userLoggedData=JSON.parse(localStorage.getItem("userData")),this.userData=new l.a(1,this.userLoggedData.office_id,2,"","","","","","",""),this.loadTable()},t.prototype.loadTable=function(){var t=this;this._userService.getUsersByOffice(this.userLoggedData.office_id).subscribe((function(e){return t.users=e}),(function(t){return alert(t)}),(function(){t.users.forEach((function(t){t.item=new l.a(t.id,1,1,t.name,t.email,t.phone,t.path_user_photo,"",t.createdAt,t.path_user_photo)})),t.source.load(t.users)}))},t.prototype.onSearch=function(t){void 0===t&&(t=""),this.source.setFilter([{field:"name",search:t},{field:"email",search:t}],!1)},t.prototype.onAddUser=function(t){var e=this;this.loadingIcon=!0,this._userService.addUser(t).subscribe((function(t){return alert(t)}),(function(){e.loadTable(),e.loadingIcon=!1,e.hideUserAddModal()}))},t.prototype.showUserAddModal=function(){this.userAddModal.show()},t.prototype.hideUserAddModal=function(){this.userData.name="",this.userData.email="",this.userData.phone="",this.userAddModal.hide()},__decorate([n.i(o.ViewChild)("userAddModal"),__metadata("design:type",r.d)],t.prototype,"userAddModal",void 0),t=__decorate([n.i(o.Component)({selector:"users-list",template:n(1748),styles:[".alert-danger { padding: 5px 10px; margin-top: 5px; font-size: 10px}"]}),__metadata("design:paramtypes",[s.a,a.b])],t)})()},1539:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",(function(){return r}));var r=(function(){function t(){}return t=__decorate([n.i(o.Component)({selector:"users",template:"<router-outlet></router-outlet>"}),__metadata("design:paramtypes",[])],t)})()},1633:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){function t(t,e,n,o,r,i,a,s,l,p){this.id=t,this.office_id=e,this.rol_id=n,this.name=o,this.email=r,this.phone=i,this.profile_photo=a,this.profile_icon=s,this.createdAt=l,this.path_user_photo=p}return t})()},1634:function(t,e,n){"use strict";var o=n(38),r=n(1539),i=n(1538),a=n(357);n.d(e,"a",(function(){return l}));var s=[{path:"",component:r.a,canActivate:[a.a],children:[{path:"",component:i.b,data:{userRole:["admin"]}},{path:"users_list",component:i.b,data:{userRole:["admin"]}}]}],l=o.a.forChild(s)},1747:function(t,e){t.exports='<button class="btn btn-success btn-icon" type="button" tooltip="Ver" (click)="showUserViewModal()">\n  <i class="ion-search"></i>\n</button>\n\n<button class="btn btn-info btn-icon" type="button" tooltip="Editar" (click)="showUserEditModal()">\n  <i class="ion-edit"></i>\n</button>\n\n<button class="btn btn-danger btn-icon" type="button" tooltip="Eliminar" (click)="showUserDeleteModal()">\n  <i class="ion-trash-a"></i>\n</button>\n\n\n\n<!-- User View Modal -->\n\n<div bsModal #userViewModal="bs-modal" class="modal fade" [config]="{backdrop: \'static\'}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="line-height: initial;">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close pull-right" aria-label="Close" (click)="hideUserViewModal()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n        <h4 class="modal-title">Ver Usuario</h4>\n      </div>\n      <div class="modal-body">\n\n          <img src="{{userData.path_user_photo}}" class="img-thumbnail img-center" alt="{{userData.name}}" width="304" height="236">\n          <br>\n\n          <form>\n\n            <div class="form-group">\n              <label for="name">Nombre:</label>\n              <input type="text" class="form-control" name=\'name\' [(ngModel)]="userData.name" disabled>\n\n            </div>\n\n            <div class="form-group">\n\n              <label for="email">Email:</label>\n              <input type="text" class="form-control" name=\'email\' [(ngModel)]="userData.email" disabled>\n\n            </div>\n\n            <div class="form-group">\n              <label for="phone1">Telefono:</label>\n              <input type="text" class="form-control" name=\'phone1\' id=\'phone1\' [(ngModel)]="userData.phone" disabled>\n            </div>\n\n            <div class="form-group">\n              <label for="createdAt">Fecha de registro:</label>\n              <input type="text" class="form-control" id="createdAt" name=\'createdAt\' [(ngModel)]="userData.createdAt" disabled>\n            </div>\n\n            <hr>\n\n            <div class="form-group">\n              <button type="button" class="btn btn-danger" (click)="hideUserViewModal()">Cerrar</button>\n            </div>\n\n          </form>\n\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<!-- User Edit Modal -->\n\n<div bsModal #userEditModal="bs-modal" class="modal fade" [config]="{backdrop: \'static\'}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="line-height: initial;">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close pull-right" aria-label="Close" (click)="hideUserEditModal()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n        <h4 class="modal-title">Editar Usuario</h4>\n      </div>\n      <div class="modal-body">\n\n          <form #userEditForm="ngForm" novalidate style="position: relative;">\n            <!--*ngIf="!loadingSendEmail"-->\n            <div class="overlayDiv" *ngIf="loadingIcon">\n              <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\n              <span class="sr-only">Loading...</span>\n            </div>\n\n            <img [src]="userData.path_user_photo" class="img-thumbnail img-center" alt={{userData.name}} width="304" height="236">\n            <br>\n\n            <div class="form-group">\n\n\n              <label for="imageUpload" class="btn btn-success labelFileContainer">Seleccionar imagen\n\n                <input type="file" id="imageUpload"\n                     [ng-file-select]="options"\n                     (onUpload)="handleUpload($event)">\n\n              </label>\n\n            </div>\n\n            <div class="form-group">\n              <label for="name">Nombre *</label>\n              <input type="text" class="form-control"  id="name" placeholder="Nombre y apellidos" name="name" [(ngModel)]="userData.name" required #name="ngModel">\n\n              <div [hidden]="name.valid || name.pristine" class="alert alert-danger">\n                * Nombre es requerido\n              </div>\n\n            </div>\n\n            <div class="form-group">\n              <label for="name">Cambiar contraseña:  </label>\n              <button class="btn btn-info" (click)="onSendPasswordToUser(userData.id)" *ngIf="!loadingIcon"> Enviar contraseña</button>\n\n            </div>\n\n            <div class="form-group">\n\n              <label for="email">Email *</label>\n              <input type="text" class="form-control" id="email" placeholder="Correo electronico" name="email" [(ngModel)]="userData.email" required #email="ngModel">\n\n              <div [hidden]="email.valid || email.pristine" class="alert alert-danger">\n                * Email es requerido\n              </div>\n\n            </div>\n\n            <div class="form-group">\n              <label for="phone">Telefono:</label>\n              <input type="text" class="form-control" id="phone" placeholder="Telefono celular" name="phone" [(ngModel)]="userData.phone">\n            </div>\n\n            <hr>\n\n            <div class="form-group">\n              <button type="button" class="btn btn-success confirm-btn" [disabled]="!userEditForm.form.valid" (click)="onEditUser(userData)">Guardar</button>\n              <button type="button" class="btn btn-danger" (click)="hideUserEditModal()">Cancelar</button>\n            </div>\n\n          </form>\n\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<!-- Delete modal -->\n<div bsModal #userDeleteModal="bs-modal" class="modal fade" [config]="{backdrop: \'static\'}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="line-height: initial;">\n  <div class="modal-dialog modal-md">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button class="close" aria-label="Close" (click)="hideUserDeleteModal()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n        <h4 class="modal-title">Eliminar registro</h4>\n      </div>\n      <div class="modal-body">\n        ¿Esta seguro que desea eliminar a <strong>{{userData.name}}</strong>?\n        <hr>\n\n        <div class="container">\n          <div class="alert alert-warning">\n            <strong>Atención!</strong> Puede transferir las propiedades antes de eliminar el usuario.\n          </div>\n\n          <div class="form-group">\n\n            <label class="col-sm-3 form-control-label" name="allUusers">Transferir a:</label>\n\n            <div class="col-sm-6">\n              <select class="form-control" id="allUusers" [(ngModel)]="selectedUser">\n                <option *ngFor="let item of users" [ngValue]="item"> {{item.name}} </option>\n              </select>\n            </div>\n\n            <div class="col-sm-3">\n              <button class="btn btn-primary btn-sm" (click)="transferProperties(userData.id)"> <i class="ion-shuffle"></i> Transferir</button>\n            </div>\n\n            <div class="col-sm-12">\n              <br>\n              <div class="alert alert-success" *ngIf="showtransferMessage">\n                <strong>Exito!</strong> Las propiedades se han transferido exitosamente.\n              </div>\n            </div>\n\n          </div>\n\n        </div>\n\n      </div>\n\n      <div class="modal-footer">\n\n        <button class="btn btn-success" (click)="onDeleteUser(userData.id)">Eliminar</button>\n        <button class="btn btn-danger confirm-btn" (click)="hideUserDeleteModal()">Cancelar</button>\n\n      </div>\n    </div>\n  </div>\n</div>\n\n'},1748:function(t,e){t.exports='<div class="widgets">\n\n  <div class="row">\n\n    <div class="col-md-10">\n\n      <div class="form-group">\n        <label class="col-sm-3 form-control-label">Busqueda</label>\n        <div class="col-sm-9">\n          <input #search class="form-control" type="text" placeholder="Buscar..." (keyup)="onSearch(search.value)">\n        </div>\n      </div>\n\n    </div>\n\n    <div class="col-md-2">\n\n      <button class="btn btn-success" (click)="showUserAddModal()">\n        <i class="ion-plus-round"></i>  Agregar usuario\n      </button>\n    </div>\n\n  </div>\n\n  <br>\n\n  <div class="row">\n    <ng2-smart-table [settings]="settings" [source]="source"></ng2-smart-table>\n  </div>\n\n\n\n  <!-- User Add Modal -->\n\n  <div bsModal #userAddModal="bs-modal" class="modal fade" [config]="{backdrop: \'static\'}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="line-height: initial;">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close pull-right" aria-label="Close" (click)="hideUserAddModal()">\n            <span aria-hidden="true">&times;</span>\n          </button>\n          <h4 class="modal-title">Agregar Usuario</h4>\n        </div>\n        <div class="modal-body">\n\n          <form #userAddForm="ngForm" novalidate style="position: relative">\n\n            <div class="overlayDiv" *ngIf="loadingIcon">\n              <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>\n              <span class="sr-only">Loading...</span>\n            </div>\n\n            <div class="form-group">\n              <label for="name">Nombre: *</label>\n              <input type="text" class="form-control"  id="name" placeholder="Nombre y apellidos" name="name" [(ngModel)]="userData.name" required #name="ngModel">\n\n              <div *ngIf="name.errors && (name.dirty || name.touched)" class="alert alert-danger">\n                * Nombre es requerido\n              </div>\n\n            </div>\n\n            <div class="form-group">\n\n              <label for="email">Email: *</label>\n              <input type="text" class="form-control" id="email" placeholder="agente@masinmobiliaria.pe" name="email" [(ngModel)]="userData.email" required #email="ngModel">\n\n              <div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger">\n                * Email es requerido\n              </div>\n\n            </div>\n\n            <div class="form-group">\n              <label for="phone">Telefono: *</label>\n              <input type="text" class="form-control" id="phone" placeholder="Telefono celular" name="phone" [(ngModel)]="userData.phone" required #phone="ngModel">\n\n              <div *ngIf="phone.errors && (phone.dirty || phone.touched)" class="alert alert-danger">\n                * Telefono es requerido\n              </div>\n\n            </div>\n\n            <hr>\n\n            <div class="form-group">\n              <button type="button" class="btn btn-success confirm-btn" [disabled]="!userAddForm.form.valid" (click)="onAddUser(userData)">Guardar</button>\n              <button type="button" class="btn btn-danger" (click)="hideUserAddModal()">Cancelar</button>\n            </div>\n\n          </form>\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n\n</div>\n'}});